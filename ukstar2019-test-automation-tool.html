<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>What To Look For in a Test Automation Tool</title>

	<meta name="description"
		content="When my team had to pick an API testing tool, we went with Postman. And the more I used it, the more frustrated I became with it. Both maintaining the tests and figuring out why tests failed (especially when in a CI pipeline) took too much effort. So I decided to write my own tool. Or rather, I set to work with pytest and the requests library, and ended up with a framework of just 300 lines of python code that fit our needs.

The core idea behind my framework is that I don’t want a testing tool that only focuses on making it easy to build tests. It should also make it easy to analyse the test results. It should also make it easy to read and understand the tests, to share them, and to maintain them. Because the thing is, during most of those activities I don’t want to be aware of the tool. I want to focus on the tests and what their results tell me about the quality of the product. That’s the key idea here: only at very specific times do I want to focus on the tool as a tool. At all other times it should just help me test better.

In my talk I will use my framework to illustrate these ideas and expand on them. I will also show how these ideas apply more generally than only to API testing frameworks. Since you’re only as good as your tool and a tool is only as good as its user, being able to evaluate testing tools is an important skill for any tester.">
	<meta name="author" content="Joep Schuurkes">

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="reveal.js/css/reveal.css">
	<link rel="stylesheet" href="css/ukstar2019.css" id="theme">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="css/ukstar2019-code.css">

	<!-- Printing and PDF exports -->
	<script>
	var link = document.createElement( 'link' );
	link.rel = 'stylesheet';
	link.type = 'text/css';
	link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
	document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>
</head>
<body>
	<div class="reveal">
		<div class="slides" style="text-align: left">
			<!-- template images are 1280 x 720 -->
			<section data-background-image="ukstar2019/ukstar-title.jpg" data-background-size=contain>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>a bit about me</h2>
				<div class="slide-body">
					<div class="flex">
						<h4 style="width:15%">twitter</h4><h4><a href="https://www.twitter.com/j19sch">@j19sch</a></h4>
					</div>
					<div class="flex" style="margin-top:1em">
						<h4 style="width:15%">web</h4>
						<div class="flex" style="flex-direction:column">
							<h4><a href="https://testingcurve.wordpress.com">testingcurve.wordpress.com</a></h4>
							<h4><a href="https://www.fourhourtester.net/">fourhourtester.net</a> <span class="sub">(with Helena Jeret-Mäe)</span></h4>
						</div>
					</div>
					<div class="flex" style="margin-top:1em">
						<h4 style="width:15%">slides</h4><h4><a href="https://j19sch.github.io">j19sch.github.io</a></h4>
					</div>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>2014 Postman & Newman</h2>
				<div class="slide-body">
					<div class="flex-c" style="justify-content:flex-start">
						<div style="flex:0 0 auto; width:35%">
							<h3>some issues</h3>
							<div class="slide-body-sub">
								<h4>version control</h4>
								<h4>details in test report</h4>
								<h4>setup & teardown</h4>
								<h4>polling</h4>
							</div>
						</div>
						<div class="flex-c" style="margin-left:1em;flex:0 1 auto;flex-direction:column;flex:0 1 auto">
							<img class="plain" style="margin-bottom:1em" width="30%" data-src="ukstar2019/postman-logo.png" alt="postman-logo"/>
							<img class="plain" width="30%" data-src="ukstar2019/newman-logo.png" alt="newman-logo"/>
						</div>
					</div>
				</div>			
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>2017 own framework</h2>
				<div class="slide-body">
					<div class="flex-c" style="justify-content:flex-start">
						<div style="flex:0 1 auto; width:50%">
							<h3>why Python?</h3>
							<div class="slide-body-sub">
								<h4>used for other auto-tests</h4>
								<h4>great language for automation</h4>
								<h4>migration still ongoing</h4>
							</div>
						</div>
						<div class="flex-c" style="margin-left:3em;flex-direction:column;flex:0 1 auto">
							<img class="plain" width="100%" data-src="ukstar2019/python-logo.png" alt="python-logo"/>
						</div>
					</div>
				</div>			
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>what we'll be doing today</h2>
				<div class="slide-body">
					<h4 class="fragment">walk through some scenarios</h4>
					<h4 class="fragment">to illustrate the ideas behind it</h4>
					<h4 class="fragment">ATM: three levels of engagement</h4>
					<h4 class="fragment">C-RUDDER: activity heuristic</h4>
					<h4 class="fragment">lessons learned</h4>
					<h4 class="fragment">wrap-up</h4>
				</div>
			</section>


			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>the API we will be testing</h2>
				<div class="slide-body">
					<h4>books API <span class="sub"><a href="https://github.com/j19sch/building-an-api-testing-framework">(code)</a></span></h4>
					<pre><code data-trim class="json">
GET /books/{book-id}

{
    "author": "Gerald Weinberg", 
    "id": "9b30d321-d242-444f-b2db-884d04a4d806", 
    "pages": 182, 
    "publisher": "Dorset House Publishing", 
    "sub_title": null, 
    "title": "Perfect Software And Other Illusions About Testing", 
    "year": 2008
}
					</code></pre>
					<h4>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>my own framework</h2>
				<div class="slide-body">
					<div class="flex-c" style="justify-content:flex-start">
						<div style="flex:0 1 auto;width:30%">
							<h4>requests</h4>
							<h4>pytest</h4>
							<h4>pytest-html</h4>
							<h4>git</h4>
						</div>
						<div class="flex-c" style="margin-left:3em;flex:0 1 auto">
							<img class="plain" style="width:20%; height:auto;margin-right:2em" data-src="ukstar2019/requests.png" alt="requests library" />
							<img class="plain" style="width:18%; height:auto" data-src="ukstar2019/pytest.png" alt="pytest" />
						</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>my own framework</h2>
				<div class="slide-body">
					<h4>read test data files (pyyaml and pytest)</h4>
					<h4>pytest-logfest</h4>
					<h4>default API credentials</h4>
					<h4>response body parsing</h4>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>glue well-established tools<br>and libraries together</h3>
				</div>
				<aside class="notes">you're not in the test tool business
				differentiator is awesome testing, not awesome test tools</aside>
			</section>


			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>let's run some tests</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
$ pytest
================================= test session starts ==================================
platform linux -- Python 3.6.7, pytest-4.3.0, py-1.8.0, pluggy-0.9.0
rootdir: /home/jss/workspace/building-an-api-testing-framework/ukstar2019, inifile:
plugins: metadata-1.8.0, html-1.20.0
collected 14 items                                                                     

test_books.py <span class="green">..............</span>                                                     <span class="dark-teal">[100%]</span>

<span class="green">============================== 14 passed in 0.09 seconds ===============================</span>
					</code></pre>
					<aside class="notes">cool! let's release</aside>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="level">
					<div>
						<h3 style="margin-bottom:0.1em"><img style="vertical-align:middle;margin-right:1em" width="15%" class="plain" data-src="ukstar2019/toaster.png" alt="toaster"/>Appliance</h3>
						<h4>information about the product</h4>
					</div>
					<div class="fragment" style="margin-top: 2.5em">
						<h4 style="margin-bottom:0"><span class="lighter">C-RUDDE</span>R</h4>
						<h3>Run & Report</h3>
					</div>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>so what did we test?</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
$ pytest -v
================================= test session starts ==================================
platform linux -- Python 3.6.7, pytest-4.3.0, py-1.8.0, pluggy-0.9.0
rootdir: /home/jss/workspace/building-an-api-testing-framework/ukstar2019, inifile:
plugins: metadata-1.8.0, html-1.20.0
collected 14 items                                                                     

test_books.py::test_get_books <span class="green">PASSED</span>                                     <span class="dark-teal">[  7%]</span>
test_books.py::test_get_single_book <span class="green">PASSED</span>                               <span class="dark-teal">[ 14%]</span>
test_books.py::test_get_single_book_invalid_uuid <span class="green">PASSED</span>                  <span class="dark-teal">[ 21%]</span>
test_books.py::test_post_book <span class="green">PASSED</span>                                     <span class="dark-teal">[ 28%]</span>
test_books.py::test_post_book_invalid_request <span class="green">PASSED</span>                     <span class="dark-teal">[ 35%]</span>
					</code></pre>
				</div>
			</section>
						<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>so what did we test?</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
test_books.py::test_delete_book <span class="green">PASSED</span>                                   <span class="dark-teal">[ 42%]</span>
test_books.py::test_delete_nonexisting_book <span class="green">PASSED</span>                       <span class="dark-teal">[ 50%]</span>
test_books.py::test_delete_book_no_auth <span class="green">PASSED</span>                           <span class="dark-teal">[ 57%]</span>
test_books.py::test_delete_book_invalid_auth <span class="green">PASSED</span>                      <span class="dark-teal">[ 64%]</span>
test_books.py::test_delete_book_invalid_uuid <span class="green">PASSED</span>                      <span class="dark-teal">[ 71%]</span>
test_books.py::test_update_book <span class="green">PASSED</span>                                   <span class="dark-teal">[ 78%]</span>
test_books.py::test_update_nonexisting_book <span class="green">PASSED</span>                       <span class="dark-teal">[ 85%]</span>
test_books.py::test_update_book_invalid_request <span class="green">PASSED</span>                   <span class="dark-teal">[ 92%]</span>
test_books.py::test_update_book_invalid_uuid <span class="green">PASSED</span>                      <span class="dark-teal">[100%]</span>

<span class="green">============================== 14 passed in 0.09 seconds ===============================</span>
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>a test does one thing<br>and one thing only</h3>
				</div>
				<aside class="notes">one sentence -> name; size of one thing depends; several similar tests</aside>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>name your tests<br>to clarify intention</h3>
				</div>
				<aside class="notes">prevents fixing the tests</aside>
			</section>



			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>let's look at the code</h2>
				<div class="slide-body">
					<pre><code data-trim class="python">
def test_post_book(books_api):
    new_book = {
        "author": "Neil Gaiman",
        "pages": 299,
        "publisher": "W.W. Norton & Company",
        "sub_title": None,
        "title": "Norse Mythology",
        "year": 2017
    }

    response = books_api.post_book(new_book)
    assert response.status_code == 201
    new_book['id'] = response.json()['id']

    response = books_api.get_one_book(new_book['id'])
    assert response.status_code == 200
    assert response.json() == new_book
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>separate test code<br>from interface code</h3>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>let's look at more code</h2>
				<div class="slide-body">
					<pre><code data-trim class="python">
class ApiClient(requests.Session):
    def __init__(self):
        super(ApiClient, self).__init__()
        self.hooks['response'].append(self._log_details)

class Books(ApiClient):
    def __init__(self):
        super(Books, self).__init__()
        self.url = f"{BASE_URL}/books"

    def get_one_book(self, book_id):
        return self.get(self.url + '/' + book_id)

    def post_book(self, new_book):
        return self.post(self.url, json=new_book)
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>use transparent abstractions<br>for your seams</h3>
				</div>
				<aside class="notes">example: headers filled by requests
							separation of concerns; don't mix abstraction levels
				</aside>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>readable tests<br>versus<br>clean code</h3>
				</div>
				<aside class="notes">clean code: names, structure, refactoring; read without scrolling</aside>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>let's add a test</h2>
				<div class="slide-body">
					<pre><code data-trim class="python">
def test_post_book_invalid_request(books_api):
    new_book = {
        "pages": 299,
        "publisher": "W.W. Norton & Company",
        "sub_title": None,
        "title": "Norse Mythology",
        "year": 2017
    }

    response = books_api.post_book(new_book)
    assert response.status_code == 400
    assert response.json()['title'] == "Failed data validation"
    assert response.json()['description'] == "'author' is a required property"
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>progamming languages<br>are domain-specific languages</h3>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="level">
					<div>
						<h3><img style="vertical-align:middle;margin-right:1em" width="15%" class="plain" data-src="ukstar2019/drill.png" alt="drill"/>Tool</h3>
						<h4>information about the tests</h4>
					</div>
					<div class="fragment" style="margin-top: 2.5em">
						<h4>C<span class="lighter">-RUDDER</span></h4>
						<h3>Create</h3>
					</div>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="level">
					<div>
						<h3><img style="vertical-align:middle;margin-right:1em" width="15%" class="plain" data-src="ukstar2019/drill.png" alt="drill"/>Tool</h3>
						<h4>information about the tests</h4>
					</div>
					<div style="margin-top: 2.5em">
						<h4><span class="lighter">C-</span>R<span class="lighter">UDDER</span></h4>
						<h3>Read</h3>
					</div>
				</div>
			</section>


			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>and then a test failed</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
$ pytest test_books.py::test_delete_book
====================================== test session starts =============================
platform linux -- Python 3.6.7, pytest-4.3.0, py-1.8.0, pluggy-0.9.0
rootdir: /home/jss/workspace/building-an-api-testing-framework/ukstar2019, inifile:
plugins: metadata-1.8.0, html-1.20.0
collected 1 item                                                                                

test_books.py <span class="red">F</span>                                                                   <span class="dark-teal">[100%]</span>

======================================= FAILURES ========================================
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>and then a test failed</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
<span class="red">_______________________________________ test_delete_book ________________________________________</span>

books_api = ⧼ukstar2019.api_clients.Books object at 0x7f78545794a8⧽
initial_books = [{'author': 'Gerald Weinberg', 'id': '9b30d321-d242-444f-b2db-884d04a4d806', 'pages': 182, 'publisher': 'Dorset House ...or': 'John Ousterhout', 'id': 'd917b78e-1dc2-4f3e-87ea-245c55c6fd52', 'pages': 178, 'publisher': 'Yaknyam Press', ...}]
creds = ('bob', 'FnbLmFORYenkROl')
new_book = {'author': 'Nicole Forsgren, Jez Humble, Gene Kim', 'id': '224ec88b-eac6-4509-8ab7-5983e764fcc6', 'pages': 257, 'publisher': 'IT Revolution', ...}

    def test_delete_book(books_api, initial_books, creds, new_book):
        book_to_delete = new_book['id']
        user, token = creds
    
        response = books_api.delete_book(book_to_delete, user, token)
>       assert response.status_code == 200
<span class="red">E       assert 204 == 200</span>
<span class="red">E        +  where 204 = ⧼Response [204]⧽.status_code</span>

<span class="red">test_books.py:69</span>: AssertionError
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>and then a test failed</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
-------------------------------------- Captured log setup ---------------------------------------
api_clients.py    15 INFO    POST: http://localhost:8001/token/bob
api_clients.py    16 INFO    headers: {'User-Agent': 'python-requests/2.21.0', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Length': '0'}
api_clients.py    20 INFO    response status: 201, elapsed: 0.001371s
api_clients.py    21 INFO    headers: {'Server': 'gunicorn/19.9.0', 'Date': 'Sun, 03 Mar 2019 20:07:44 GMT', 'Connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'content-length': '28'}
api_clients.py    23 INFO    response body: {"token": "FnbLmFORYenkROl"}
api_clients.py    15 INFO    POST: http://localhost:8001/books
api_clients.py    16 INFO    headers: {'User-Agent': 'python-requests/2.21.0', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Length': '210', 'Content-Type': 'application/json'}
api_clients.py    18 INFO    request body: b'{"author": "Nicole Forsgren, Jez Humble, Gene Kim", "pages": 257, "publisher": "IT Revolution", "sub_title": "Building and scaling high performing technology organizations", "title": "Accelerate", "year": 2018}'
api_clients.py    20 INFO    response status: 201, elapsed: 0.001469s
api_clients.py    21 INFO    headers: {'Server': 'gunicorn/19.9.0', 'Date': 'Sun, 03 Mar 2019 20:07:44 GMT', 'Connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'content-length': '46'}
api_clients.py    23 INFO    response body: {"id": "224ec88b-eac6-4509-8ab7-5983e764fcc6"}
--------------------------------------- Captured log call ---------------------------------------
api_clients.py    15 INFO    DELETE: http://localhost:8001/books/224ec88b-eac6-4509-8ab7-5983e764fcc6
api_clients.py    16 INFO    headers: {'User-Agent': 'python-requests/2.21.0', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'user': 'bob', 'token': 'FnbLmFORYenkROl', 'Content-Length': '0'}
api_clients.py    20 INFO    response status: 204, elapsed: 0.000801s
api_clients.py    21 INFO    headers: {'Server': 'gunicorn/19.9.0', 'Date': 'Sun, 03 Mar 2019 20:07:44 GMT', 'Connection': 'close'}
<span class="red">=================================== 1 failed in 0.04 seconds ====================================</span>
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>there is no such thing as<br>too much information<br><span class="fragment">if it's well-structured</span></h3>
					<aside class="notes">if well-structured / navigateable</aside>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>never trust a test<br>you haven't seen fail</h3>
				</div>
			</section>



			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>and then a test errored</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
<span class="red">_______________________________________ test_get_single_book _______________________________________</span>

books_api = ⧼ukstar2019.api_clients.Books object at 0x7fe3ab605550⧽
initial_books = [{'author': 'Gerald Weinberg', 'id': '9b30d321-d242-444f-b2db-884d04a4d806', 'pages': 182, 'publisher': 'Dorset House ...or': 'John Ousterhout', 'id': 'd917b78e-1dc2-4f3e-87ea-245c55c6fd52', 'pages': 178, 'publisher': 'Yaknyam Press', ...}]

    def test_get_single_book(books_api, initial_books):
        expected = initial_books[0].copy()
    
>       response = books_api.get_one_book(expected['id'])

<span class="red">test_books</span>.py:16: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
					</code></pre>
				</div>
			</section>
						<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>and then a test errored</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
<span class="red">api_clients.py</span>:43: in get_one_book
    return self.get(self.url + '/' + book_id)
<span class="red">venv/lib/python3.6/site-packages/requests/sessions.py</span>:546: in get
    return self.request('GET', url, **kwargs)
<span class="red">venv/lib/python3.6/site-packages/requests/sessions.py</span>:533: in request
    resp = self.send(prep, **send_kwargs)
<span class="red">venv/lib/python3.6/site-packages/requests/sessions.py</span>:653: in send
    r = dispatch_hook('response', hooks, r, **kwargs)
<span class="red">venv/lib/python3.6/site-packages/requests/hooks.py</span>:31: in dispatch_hook
    _hook_data = hook(hook_data, **kwargs)
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>and then a test errored</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
response = ⧼Response [200]⧽, args = (), kwargs = {'cert': None, 'proxies': OrderedDict(), 'stream': False, 'timeout': None, ...}

    @staticmethod
    def _log_details(response, *args, **kwargs):
        logging.info("{}: {}".format(response.request.method, response.request.url))
        logging.info("headers: {}".format(response.request.headers))
        if response.request.body is not None:
            logging.info("request body: {}".format(response.request.body))
    
        logging.info("response status: {}, elapsed: {}s".format(response.status_code, response.elapsed.total_seconds()))
>       logging.info("headers: {}".format(response.header))
<span class="red">E       AttributeError: 'Response' object has no attribute 'header'</span>

<span class="red">api_clients.py</span>:20: AttributeError
<span class="red">================================== 1 failed in 0.05 seconds ==================================</span>
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>let's do some debugging</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
$ pytest test_books.py::test_get_single_book --pdb
====================================== test session starts ======================================
platform linux -- Python 3.6.7, pytest-4.3.0, py-1.8.0, pluggy-0.9.0
rootdir: /home/jss/workspace/building-an-api-testing-framework/ukstar2019, inifile:
plugins: metadata-1.8.0, html-1.20.0
collected 1 item

test_books.py <span class="red">F</span>
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> traceback >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
--- snip test output ---
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>let's do some debugging</h2>
				<div class="slide-body">
					<pre><code data-trim data-noescape class="nohighlight">
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> entering PDB >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[17] > /home/jss/workspace/building-an-api-testing-framework/ukstar2019/
	api_clients.py(20)_log_details()
-> logging.info("headers: {}".format(response.header))
   6 frames hidden (try 'help hidden_frames')
(Pdb++) <mark>dir(response)</mark>
['__attrs__', '__bool__', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__',
'__enter__', '__eq__', '__exit__', '__format__', '__ge__', '__getattribute__',
'__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__',
'__le__', '__lt__', '__module__', '__ne__', '__new__', '__nonzero__', '__reduce__',
'__reduce_ex__', '__repr__', '__setattr__', '__setstate__', '__sizeof__', '__str__',
'__subclasshook__', '__weakref__', '_content', '_content_consumed', '_next',
'apparent_encoding', 'close', 'connection', 'content', 'cookies', 'elapsed', 'encoding',
<mark>'headers'</mark>, 'history', 'is_permanent_redirect', 'is_redirect', 'iter_content', 'iter_lines',
'json', 'links', 'next', 'ok', 'raise_for_status', 'raw', 'reason', 'request', 'status_code',
'text', 'url']
					</code></pre>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="level">
					<div>
						<h3><img style="vertical-align:middle;margin-right:1em" width="15%" class="plain" data-src="ukstar2019/nuts-bolts.png" alt="nuts and bolts"/>Machine</h3>
						<h4>information about the implementation</h4>
					</div>
					<div class="fragment" style="margin-top: 2.5em">
						<h4><span class="lighter">C-RUD</span>D<span class="lighter">ER</span></h4>
						<h3>Debug</h3>
					</div>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>many different things can go wrong<br>make sure you can find out what</h3>
					<aside class="notes">product & infra, auto-tests & infra, testing</aside>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<div class="lesson">
					<img class="plain" width="10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>
					<h3>forced switching<br>between levels sucks</h3>
					<aside class="notes">yak shaving</aside>
				</div>
			</section>


 			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h1 style="margin-top:1.7em">wrap-up</h1>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>ATM - three levels</h2>
				<div class="slide-body">
					<div class="flex" style="flex-direction: column; justify-content: space-between;"
>						<div class="flex-c" style="justify-content: space-around">
							<img style="margin-right:1em;width:10%;height:auto" class="plain" data-src="ukstar2019/toaster.png" alt="toaster"/>
							<h3 style="width:22%">Appliance</h3>
							<h4 style="width:25%" class="fragment" data-fragment-index="1">product</h4>
							<h4 style="width:20%;font-style: italic" class="fragment" data-fragment-index="2">user</h4>
						</div>
						<div class="flex-c" style="margin-top:2em; justify-content: space-around">
							<img style="margin-right:1em;width:10%;height:auto" class="plain" data-src="ukstar2019/drill.png" alt="drill"/>
							<h3 style="width:22%">Tool</h3>
							<h4 style="width:25%" class="fragment" data-fragment-index="1">tests</h4>
							<h4 style="width:20%;font-style: italic" class="fragment" data-fragment-index="2">power user</h4>
						</div>
						<div class="flex-c" style="margin-top:2em; justify-content: space-around;">
							<img style="margin-right:1em;width:10%;height:auto" class="plain" data-src="ukstar2019/nuts-bolts.png" alt="nuts and bolts"/>
							<h3 style="width:22%">Machine</h3>
							<h4 style="width:25%" class="fragment" data-fragment-index="1">implementation</h4>
							<h4 style="width:20%;font-style:italic" class="fragment" data-fragment-index="2">toolsmith</h4>
						</div>
					</div>
				</div>
				<aside class="notes">levels inform decisions; levels of programming skills; decide for you what each level means</aside>
			</section>
			<section data-transition="slide-in none"data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>C-RUDDER</h2>
				<div class="slide-body">
					<div style="display:flex; justify-content:space-around;">
						<div class="flex" style="width:30%;justify-content: center;flex-direction:column; flex:auto 0 0">
							<h3><span class="heuristic">C</span>reate</h3>
							<h3><span class="heuristic">R</span>ead</h3>
							<h3><span class="lighter heuristic">U</span></h3>
							<h3><span class="lighter heuristic">D</span></h3>
						</div>
							<div class="flex" style="width:40%;justify-content:center;flex-direction:column; flex:auto 0 0">
								<h3><span class="heuristic">D</span>ebug</h3>
								<h3><span class="lighter heuristic">E</span></h3>
								<h3><span class="heuristic">R</span>un & report</h3>
							</div>
						</div>
					</div>
			</section>
			<section data-transition="none" data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>C-RUDDER</h2>
				<div class="slide-body">
					<div style="display:flex; justify-content:space-around;">
						<div class="flex" style="width:30%;justify-content: center;flex-direction:column; flex:auto 0 0">
							<h3><span class="heuristic">C</span>reate</h3>
							<h3><span class="heuristic">R</span>ead</h3>
							<h3><span class="heuristic">U</span>pdate</h3>
							<h3><span class="lighter heuristic">D</span></h3>
						</div>
							<div class="flex" style="width:40%;justify-content:center;flex-direction:column; flex:auto 0 0">
								<h3><span class="heuristic">D</span>ebug</h3>
								<h3><span class="lighter heuristic">E</span></h3>
								<h3><span class="heuristic">R</span>un & report</h3>
							</div>
						</div>
					</div>
			</section>
			<section data-transition="none" data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>C-RUDDER</h2>
				<div class="slide-body">
					<div style="display:flex; justify-content:space-around;">
						<div class="flex" style="width:30%;justify-content: center;flex-direction:column; flex:auto 0 0">
							<h3><span class="heuristic">C</span>reate</h3>
							<h3><span class="heuristic">R</span>ead</h3>
							<h3><span class="heuristic">U</span>pdate</h3>
							<h3><span class="heuristic">D</span>elete</h3>
						</div>
							<div class="flex" style="width:40%;justify-content:center;flex-direction:column; flex:auto 0 0">
								<h3><span class="heuristic">D</span>ebug</h3>
								<h3><span class="lighter heuristic">E</span></h3>
								<h3><span class="heuristic">R</span>un & report</h3>
							</div>
						</div>
					</div>
			</section>
			<section data-transition="none" data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>C-RUDDER</h2>
				<div class="slide-body">
					<div style="display:flex; justify-content:space-around;">
						<div class="flex" style="width:30%;justify-content: center;flex-direction:column; flex:auto 0 0">
							<h3><span class="heuristic">C</span>reate</h3>
							<h3><span class="heuristic">R</span>ead</h3>
							<h3><span class="heuristic">U</span>pdate</h3>
							<h3><span class="heuristic">D</span>elete</h3>
						</div>
							<div class="flex" style="width:40%;justify-content:center;flex-direction:column; flex:auto 0 0">
								<h3><span class="heuristic">D</span>ebug</h3>
								<h3><span class="heuristic">E</span>xplore</h3>
								<h3><span class="heuristic">R</span>un & report</h3>
							</div>
						</div>
					</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2><img class="plain" width="6%" style="vertical-align:-10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>lessons learned - auto-tests</h2>
				<div class="slide-body">
					<h4>a test does one thing and one thing only</h4>
					<h4>name your tests to clarify intention</h4>
					<h4>readable tests versus clean code</h4>
					<h4>never trust a test you haven't seen fail</h4>
				</div>
				<aside class="notes">separate test from setup/teardown to clarify intention; each test can be run in isolation</aside>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2><img class="plain" width="6%" style="vertical-align:-10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>lessons learned - reports</h2>
				<div class="slide-body">
					<h4>there is no such thing as too much information<br>(if well-structured)</h4>
					<h4>many different things can go wrong,<br>make sure you can find out what</h4>
					<h4>forced switching between levels sucks</h4>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2><img class="plain" width="6%" style="vertical-align:-10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>lessons learned - framework</h2>
				<div class="slide-body">
					<h4>glue well-established tools and libraries together</h4>
					<h4>separate test code from interface code</h4>
					<h4>use transparent abstractions for your seams</h4>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2><img class="plain" width="6%" style="vertical-align:-10%" data-src="ukstar2019/light-bulb-icon.png" alt="lightbulb"/>lessons learned - code</h2>
				<div class="slide-body">
					<h4>progamming languages are domain-specific languages</h4>
					<h4>version control is a great way to do version control</h4>
					<h4>don't be too smart in your code</h4>
					<h4>logging and debugging are your friends</h4>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>image attributions</h2>
				<div class="slide-body">
					<h5><a href="http://www.iconarchive.com/show/small-n-flat-icons-by-paomedia/light-bulb-icon.html">“lightbulb icon”</a> by <a href="http://www.iconarchive.com/artist/paomedia.html">paomedia</a> is part of the <a href="https://en.wikipedia.org/wiki/Public_domain">public domain</a></h5>
					<h5><a href="https://www.iconfinder.com/icons/3605318/bolt_bolts_construction_rivet_screw_screws_icon">"nuts and bolts icon"</a> by <a href="https://www.iconfinder.com/Chanut-is">Chanut is Industries</a> is licensed under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></h5>
					<h5><a href="https://www.iconfinder.com/icons/2023120/appliance_bread_breadfast_kitchen_toaster_icon">"toaster icon"</a> by <a href="https://www.iconfinder.com/wxchee">W.X. Chee</a> is free for commercial use (include link to author's website)</h5>
					<h5><a href="https://www.iconfinder.com/icons/3605335/carpentry_drill_drilling_industry_machine_repair_tool_icon">"drill icon"</a> by <a href="https://www.iconfinder.com/Chanut-is">Chanut is Industries</a> is licensed under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></h5>
				</div>
			</section>
			<section data-transition="none" data-background-image="ukstar2019/ukstar-questions.jpg" data-background-size=contain>
				<div style="text-align: center">
					<h3 style="color:#fff;margin-top: 1.2em">Thank you!</h3>
					<h4 style="color:#fff;margin-top: 5em">@j19sch<br>j19sch.github.io</h4>
				</div>
			</section>
			<section data-background-image="ukstar2019/ukstar-slide.jpg" data-background-size=contain>
				<h2>misc notes</h2>
				<h5>"Thus, programs must be written for people to read, and only incidentally for machines to execute."<br>Abelson & Sussman in "Structure and Interpretation of Computer Programs"</h5>
				<h5>People don't want an electrical drill, they want a hole in the wall. No, they want to hang up a picture.</h5>
			</section>
		</div>

		<script src="reveal.js/lib/js/head.min.js"></script>
		<script src="reveal.js/js/reveal.js"></script>

		<script>

		// Full list of configuration options available at:
		// https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			controls: false,
			progress: true,
			slideNumber: false,
			history: true,
			center: false,

			// test aspect ratio 4:3
			// because template images
			width: 1280,
			height: 720,

			transition: 'none', // none/fade/slide/convex/concave/zoom
			transitionspeed: 'fast',

			// Optional reveal.js plugins
			dependencies: [
				{ src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
				{ src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: 'reveal.js/plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
				{ src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
				{ src: 'reveal.js/plugin/notes/notes.js', async: true }
			]
		});

		</script>

	</body>
	</html>
